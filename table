CREATE table FONCTION(
	ID_FONCTION NUMBER NOT NULL,
	NOM VARCHAR2(20) NOT NULL,
	CONSTRAINT CARTE_PK PRIMARY KEY (ID_Fonction)
);

CREATE SEQUENCE fonct_seq 
START WITH 1
INCREMENT BY 1
NOCACHE
NOCYCLE;



CREATE table CARTE(
	ID_CARTE NUMBER NOT NULL,
	NUMERO VARCHAR2(20) NOT NULL,
	PERSONNE NUMBER NOT NULL,
	CONSTRAINT CARTE_PK PRIMARY KEY (ID_CARTE),
	CONSTRAINT FK_PERSONNE
		FOREIGN KEY (PERSONNE)
		REFERENCES PERSONNE(ID_PERSONNE)
		ON DELETE CASCADE
);

CREATE SEQUENCE carte_seq 
START WITH 1
INCREMENT BY 1
NOCACHE
NOCYCLE;


CREATE table PERSONNE(
	ID_PERSONNE NUMBER NOT NULL,
	NOM VARCHAR2(20) NOT NULL,
	PRENOM VARCHAR2(20) NOT NULL,
	DATENAISSANCE DATE NOT NULL,
	FONCTION NUMBER NOT NULL,
	CONSTRAINT PERSONNE_PK primary key (ID_PERSONNE),
	CONSTRAINT FK_FONCTION
		FOREIGN KEY (FONCTION)
		REFERENCES FONCTION(ID_FONCTION)
);


CREATE SEQUENCE pers_seq 
START WITH 1
INCREMENT BY 1
NOCACHE
NOCYCLE;



CREATE TABLE LIEUX(
	ID_LIEUX NUMBER NOT NULL,
	EMPLACEMENT VARCHAR2(20) NOT NULL,
	NBACCES NUMBER NOT NULL,
	HORAIRE NUMBER NOT NULL,
	CONSTRAINT LIEU_PK primary key (ID_LIEU)
);

CREATE SEQUENCE lieux_seq 
START WITH 1
INCREMENT BY 1
NOCACHE
NOCYCLE;

	
CREATE TABLE A(
	ID_A_LIEUX NUMBER NOT NULL,
	ID_A_ACCES NUMBER NOT NULL,
	nb NUMBER NOT NULL,
	CONSTRAINT A_PK primary key(ID_A_LIEUX,ID_A_ACCES),
	CONSTRAINT FK_LIEUX
		FOREIGN KEY (ID_A_LIEUX)
		REFERENCES LIEUX(ID_LIEUX),
	CONSTRAINT FK_ACCES
		FOREIGN KEY (ID_A_ACCES)
		REFERENCES ACCES_TYPE(ID_ACCES)
);

CREATE TABLE ACCES_TYPE(
	ID_ACCES NUMBER NOT NULL,
	TYPE VARCHAR(20) NOT NULL,
	CONSTRAINT ACCES_PK primary key(ID_ACCES)
	
);

CREATE SEQUENCE acces_seq 
START WITH 1
INCREMENT BY 1
NOCACHE
NOCYCLE;

CREATE TABLE HORAIRE(
	ID_HORAIRE NUMBER NOT NULL,
	OUV VARCHAR2(20) NOT NULL,
	FER VARCHAR2(20) NOT NULL,
	LIEUX NUMBER NOT NULL,
	CONSTRAINT HORAIRE_PK primary key(ID_HORAIRE),
	CONSTRAINT FK_LIEUX
		FOREIGN KEY (LIEUX)
		REFERENCES LIEUX(ID_LIEUX)
);
